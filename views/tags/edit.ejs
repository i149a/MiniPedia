<%- include('../partials/header.ejs') %>

<h2>Edit Post: <%= post.title %></h2>

<form action="/posts/<%= post._id %>?_method=PUT" method="POST">
    <input type="hidden" name="editor" value="<%= currentUser._id %>">
  
    <input type="text" name="title" value="<%= post.title %>" required>
    <textarea name="body" required><%= post.body %></textarea>
    <input type="text" name="image" value="<%= post.image || '' %>">

    <h3>Update Tags:</h3>
    <% tags.forEach(tag => { %>
    <div>
        <input type="checkbox" name="tags" value="<%= tag._id %>"
            <%= post.tags.some(t => t.equals(tag._id)) ? 'checked' : '' %>>
        <label><%= tag.title %></label>
    </div>
    <% }); %>

    <button type="submit">Update Post</button>
</form>

<a href="/posts/<%= post._id %>">Cancel</a>

<%- include('../partials/footer.ejs') %>